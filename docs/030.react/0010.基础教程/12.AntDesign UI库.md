---
title: 12-AntDesign UIåº“
date: 2023-02-07 18:25:44
permalink: /pages/75ac3b/
categories:
  - react
tags:
  - 
---
## ä¸€. è®¤è¯†AntDesign

### 1.1. AntDesignçš„ä»‹ç»

`AntDesign` ï¼Œç®€ç§° `antd` æ˜¯åŸºäº Ant Design è®¾è®¡ä½“ç³»çš„ React UI ç»„ä»¶åº“ï¼Œä¸»è¦ç”¨äºç ”å‘ä¼ä¸šçº§ä¸­åå°äº§å“ã€‚

AntDesignçš„ç‰¹ç‚¹ï¼š

- ğŸŒˆ æç‚¼è‡ªä¼ä¸šçº§ä¸­åå°äº§å“çš„äº¤äº’è¯­è¨€å’Œè§†è§‰é£æ ¼ã€‚
- ğŸ“¦ å¼€ç®±å³ç”¨çš„é«˜è´¨é‡ React ç»„ä»¶ã€‚
- ğŸ›¡ ä½¿ç”¨ TypeScript å¼€å‘ï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚
- âš™ï¸ å…¨é“¾è·¯å¼€å‘å’Œè®¾è®¡å·¥å…·ä½“ç³»ã€‚
- ğŸŒ æ•°åä¸ªå›½é™…åŒ–è¯­è¨€æ”¯æŒã€‚
- ğŸ¨ æ·±å…¥æ¯ä¸ªç»†èŠ‚çš„ä¸»é¢˜å®šåˆ¶èƒ½åŠ›ã€‚

```
å…¨é“¾è·¯å¼€å‘å’Œè®¾è®¡æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ
```

- å…¨é“¾è·¯è¿™ä¸ªè¯æˆ‘è®°å¾—æ˜¯16å¹´å·¦å³é˜¿é‡Œæå‡ºçš„ï¼›
- ä»`ä¸šåŠ¡æˆ˜ç•¥â€”ç”¨æˆ·åœºæ™¯â€”è®¾è®¡ç›®æ ‡â€”äº¤äº’ä½“éªŒâ€”ç”¨æˆ·æµç¨‹â€”é¢„æœŸæ•ˆç‡`å…¨æ–¹é¢è¿›è¡Œåˆ†æå’Œè€ƒè™‘ï¼›
- è¿™ä¸ªä¸»è¦æ˜¯äº§å“ç»ç†ä¼šè€ƒè™‘çš„ä¸€ä¸ªç‚¹ï¼›

AntDesignçš„å…¼å®¹æ€§ï¼š

- ç°ä»£æµè§ˆå™¨å’Œ IE11ï¼ˆéœ€è¦ polyfillsï¼‰ã€‚
- æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚
- Electron

![å›¾ç‰‡](./assets/640-1640164992973.jpeg)`antd@2.0` ä¹‹åä¸å†æ”¯æŒ IE8ï¼Œ`antd@4.0` ä¹‹åä¸å†æ”¯æŒ IE9/10ã€‚

ç›®å‰ç¨³å®šçš„ç‰ˆæœ¬ï¼šv4.4.0

### 1.2. AntDesignçš„å®‰è£…

**ä½¿ç”¨ npm æˆ– yarn å®‰è£…**

npmå®‰è£…ï¼š

```javascript
npm install antd --save
```

yarnå®‰è£…ï¼š

```javascript
yarn add antd
```

æˆ‘ä»¬éœ€è¦åœ¨index.jsä¸­å¼•å…¥å…¨å±€çš„Antdæ ·å¼ï¼š

```javascript
import "antd/dist/antd.css";
```

åœ¨App.jsä¸­å°±å¯ä»¥ä½¿ç”¨ä¸€äº›ç»„ä»¶äº†ï¼š

![å›¾ç‰‡](./assets/640-1640165061446.jpeg)

**è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šAntdæ˜¯å¦ä¼šå°†ä¸€äº›æ²¡æœ‰ç”¨çš„ä»£ç ï¼ˆç»„ä»¶æˆ–è€…é€»è¾‘ä»£ç ï¼‰å¼•å…¥ï¼Œé€ æˆåŒ…å¾ˆå¤§å‘¢ï¼Ÿ**

`antd` å®˜ç½‘æœ‰æåˆ°ï¼š`antd` çš„ JS ä»£ç é»˜è®¤æ”¯æŒåŸºäº ES modules çš„ tree shakingï¼Œå¯¹äº js éƒ¨åˆ†ï¼Œç›´æ¥å¼•å…¥ `import { Button } from 'antd'` å°±ä¼šæœ‰æŒ‰éœ€åŠ è½½çš„æ•ˆæœã€‚

### 1.3. é«˜çº§é…ç½®

#### 1.3.1. è®¤è¯†craco

ä¸Šé¢çš„ä½¿ç”¨è¿‡ç¨‹æ˜¯æ— æ³•å¯¹ä¸»é¢˜è¿›è¡Œé…ç½®çš„ï¼Œå¥½åƒå¯¹ä¸»é¢˜ç­‰ç›¸å…³çš„é«˜çº§ç‰¹æ€§è¿›è¡Œé…ç½®ï¼Œéœ€è¦ä¿®æ”¹create-react-app çš„é»˜è®¤é…ç½®ã€‚

å¦‚ä½•ä¿®æ”¹create-react-app çš„é»˜è®¤é…ç½®å‘¢ï¼Ÿ

- å‰é¢æˆ‘ä»¬è®²è¿‡ï¼Œå¯ä»¥é€šè¿‡`yarn run eject`æ¥æš´éœ²å‡ºæ¥å¯¹åº”çš„é…ç½®ä¿¡æ¯è¿›è¡Œä¿®æ”¹ï¼›
- ä½†æ˜¯å¯¹äºwebpackå¹¶ä¸ç†Ÿæ‚‰çš„äººæ¥è¯´ï¼Œç›´æ¥ä¿®æ”¹ CRA çš„é…ç½®æ˜¯å¦ä¼šç»™ä½ çš„é¡¹ç›®å¸¦æ¥è´Ÿæ‹…ï¼Œç”šè‡³ä¼šå¢åŠ é¡¹ç›®çš„éšæ‚£å’Œä¸ç¨³å®šæ€§å‘¢ï¼Ÿ
- æ‰€ä»¥ï¼Œåœ¨é¡¹ç›®å¼€å‘ä¸­æ˜¯ä¸å»ºè®®å¤§å®¶ç›´æ¥å»ä¿®æ”¹ CRA çš„é…ç½®ä¿¡æ¯çš„ï¼›

é‚£ä¹ˆå¦‚ä½•æ¥è¿›è¡Œä¿®æ”¹é»˜è®¤é…ç½®å‘¢ï¼Ÿç¤¾åŒºç›®å‰æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¸¸è§çš„æ–¹æ¡ˆï¼š

- react-app-rewired + customize-craï¼›ï¼ˆè¿™ä¸ªæ˜¯antdæ—©æœŸæ¨èçš„æ–¹æ¡ˆï¼‰
- cracoï¼›ï¼ˆç›®å‰antdæ¨èçš„æ–¹æ¡ˆï¼‰

ç¬¬ä¸€æ­¥ï¼šå®‰è£…cracoï¼š

```javascript
yarn add @craco/craco
```

ç¬¬äºŒæ­¥ï¼šä¿®æ”¹package.jsonæ–‡ä»¶

- åŸæœ¬å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡react-scriptsæ¥ç®¡ç†çš„ï¼›
- ç°åœ¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡cracoæ¥ç®¡ç†ï¼›

```javascript
"scripts": {
-   "start": "react-scripts start",
-   "build": "react-scripts build",
-   "test": "react-scripts test",
+   "start": "craco start",
+   "build": "craco build",
+   "test": "craco test",
}
```

ç¬¬ä¸‰æ­¥ï¼šåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºcraco.config.jsæ–‡ä»¶ç”¨äºä¿®æ”¹é»˜è®¤é…ç½®

```javascript
module.exports = {
  // é…ç½®æ–‡ä»¶
}
```

#### 1.3.2. é…ç½®ä¸»é¢˜

æŒ‰ç…§ é…ç½®ä¸»é¢˜ çš„è¦æ±‚ï¼Œè‡ªå®šä¹‰ä¸»é¢˜éœ€è¦ç”¨åˆ°ç±»ä¼¼ less-loader æä¾›çš„ less å˜é‡è¦†ç›–åŠŸèƒ½ï¼š

- æˆ‘ä»¬å¯ä»¥å¼•å…¥ craco-less æ¥å¸®åŠ©åŠ è½½ less æ ·å¼å’Œä¿®æ”¹å˜é‡ï¼›

å®‰è£… `craco-less`ï¼š

```javascript
yarn add craco-less
```

ä¿®æ”¹craco.config.jsä¸­çš„pluginsï¼š

- ä½¿ç”¨`modifyVars`å¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹LESSå˜é‡ï¼›

```javascript
const CracoLessPlugin = require('craco-less');

module.exports = {
  plugins: [
    {
      plugin: CracoLessPlugin,
      options: {
        lessLoaderOptions: {
          lessOptions: {
            modifyVars: { '@primary-color': '#1DA57A' },
            javascriptEnabled: true,
          },
        },
      },
    },
  ],
}
```

å¼•å…¥antdçš„æ ·å¼æ—¶ï¼Œå¼•å…¥antd.lessæ–‡ä»¶ï¼š

```javascript
// import "antd/dist/antd.css";
import 'antd/dist/antd.less';
```

ä¿®æ”¹åé‡å¯ `yarn start`ï¼Œå¦‚æœçœ‹åˆ°ä¸€ä¸ªç»¿è‰²çš„æŒ‰é’®å°±è¯´æ˜é…ç½®æˆåŠŸäº†ã€‚

#### 1.3.3. é…ç½®åˆ«å

åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼ŒæŸäº›ç»„ä»¶æˆ–è€…æ–‡ä»¶çš„å±‚çº§ä¼šè¾ƒæ·±ï¼Œ

- å¦‚æœæˆ‘ä»¬é€šè¿‡ä¸Šå±‚ç›®å½•å»å¼•å…¥å°±ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼š`../../../../components/button`ï¼›
- å¦‚æœæˆ‘ä»¬å¯ä»¥é…ç½®åˆ«åï¼Œå°±å¯ä»¥ç›´æ¥ä»æ ¹ç›®å½•ä¸‹é¢å¼€å§‹æŸ¥æ‰¾æ–‡ä»¶ï¼š`@/components/button`ï¼Œç”šè‡³æ˜¯ï¼š`components/button`ï¼›

é…ç½®åˆ«åä¹Ÿéœ€è¦ä¿®æ”¹webpackçš„é…ç½®ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å€ŸåŠ©äº craco æ¥å®Œæˆï¼š

```javascript
...

const path = require("path");
const resolve = dir => path.resolve(__dirname, dir);

module.exports = {
  ...
  ,
  webpack: {
    alias: {
      '@': resolve("src"),
      'components': resolve("src/components"),
    }
  }
}
```

åœ¨å¯¼å…¥æ—¶å°±å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ–¹å¼æ¥ä½¿ç”¨äº†ï¼š

```javascript
import HYCommentInput from '@/components/comment-input';
import HYCommentItem from 'components/comment-item';
```

## äºŒ. AntDesignæ¡ˆä¾‹

æˆ‘ä»¬é€šè¿‡AntDesignæ¥ç¼–å†™ä¸€ä¸ªæ¡ˆä¾‹ï¼š

![å›¾ç‰‡](./assets/640-1640165178383.jpeg)

### 1.1. æ¡ˆä¾‹-è¯„è®ºæ¡†

æˆ‘ä»¬é€‰æ¥å®Œæˆè¯„è®ºæ¡†ï¼Œè¯„è®ºæ¡†æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼š

- TextAreaçš„è¾“å…¥æ¡†ï¼šInput.TextAreaï¼›
- æäº¤è¯„è®ºçš„æŒ‰é’®ï¼šButtonï¼›

```javascript
import React, { PureComponent } from 'react';

import moment from 'moment';
import {
  Form, Button, Input
} from 'antd';

export default class HYCommentInput extends PureComponent {
  constructor(props) {
    super(props);

    this.state = {
      value: ""
    }
  }

  render() {
    return (
      <div>
        <Input.TextArea rows={4} onChange={this.onChange.bind(this)} value={this.state.value} />
        <Button onClick={this.onSubmit.bind(this)} type="primary">
          æ·»åŠ è¯„è®º
        </Button>
      </div>
    )
  }

  onChange(e) {
    this.setState({
      value: e.target.value
    })
  }

  onSubmit() {
    console.log(this.state.value, moment().fromNow());
    const commentInfo = {
      id: Date.now(),
      name: "coderwhy",
      avatar: "https://upload.jianshu.io/users/upload_avatars/1102036/c3628b478f06.jpeg?imageMogr2/auto-orient/strip|imageView2/1/w/240/h/240",
      content: <p>{this.state.value}</p>,
      datetime: moment()
    }

    this.props.submitComment(commentInfo);
    this.setState({
      value: ""
    });
  }
}
```

### 1.2. æ¡ˆä¾‹-è¯„è®ºåˆ—è¡¨

è¯„è®ºåˆ—è¡¨ä¸»è¦æ˜¯ä½¿ç”¨Commentç»„ä»¶ï¼ŒCommentç»„ä»¶æœ‰ä¸€äº›å±æ€§ï¼š

- authorï¼šå±•ç¤ºä½œè€…çš„åç§°ï¼›

- avatarï¼šå±•ç¤ºä½œè€…çš„å¤´åƒï¼›

- - å¯ä»¥ä½¿ç”¨Avatarçš„ç»„ä»¶è¿›è¡Œå±•ç¤ºï¼›

- contentï¼šå±•ç¤ºè¯„è®ºçš„å†…å®¹ï¼›

- datetimeï¼šå±•ç¤ºè¯„è®ºçš„æ—¶é—´ï¼š

- - è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Tooltipç»„ä»¶ï¼Œå½“é¼ æ ‡æ”¾åœ¨ä¸Šé¢æ—¶ï¼Œä¼šæ˜¾ç¤ºå¯¹åº”çš„titleå†…å®¹ï¼›

- actionsï¼šè¯„è®ºä¸‹æ–¹çš„æ“ä½œæŒ‰é’®ï¼›

- - è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨DeleteOutlinedï¼Œä½†æ˜¯å®ƒæ¥è‡ª `@ant-design/icons`ï¼Œéœ€è¦æˆ‘ä»¬è¿›è¡Œå®‰è£…ï¼›

```javascript
import React, { PureComponent } from 'react';

import {
  Comment,
  Avatar,
  Tooltip
} from "antd";
import { DeleteOutlined } from "@ant-design/icons";

export default class HYCommentItem extends PureComponent {
  render() {
    const { comment } = this.props;

    return (
      <Comment
        author={<a href="/#">{comment.name}</a>}
        avatar={
          <Avatar
            src={comment.avatar}
            alt={comment.name}
          />
        }
        content={comment.content}
        datetime={
          <Tooltip title={comment.datetime.format('YYYY-MM-DD HH:mm:ss')}>
            <span>{comment.datetime.fromNow()}</span>
          </Tooltip>
        }
        actions={ this.getActions() }
      />
    )
  }

  getActions() {
    return [
      <span onClick={this.props.removeItem}><DeleteOutlined/> åˆ é™¤</span>
    ]
  }
}
```

### 1.3. æ¡ˆä¾‹-Appç»„ä»¶

æˆ‘ä»¬åœ¨Appç»„ä»¶ä¸­ï¼Œä½¿ç”¨å°è£…çš„ä¸¤ä¸ªç»„ä»¶ï¼š

```javascript
import React, { PureComponent } from 'react';

import HYCommentInput from './components/comment-input';
import HYCommentItem from './components/comment-item';

export default class App extends PureComponent {
  constructor(props) {
    super(props);

    this.state = {
      commentList: []
    }
  }

  render() {
    return (
      <div style={{width: "500px", padding: "20px"}}>
        {
          this.state.commentList.map((item, index) => {
            return <HYCommentItem key={item.id} 
                                  comment={item} 
                                  index={index} 
                                  removeItem={e => this.removeItem(index)}/>
          })
        }
        <HYCommentInput submitComment={this.submitComment.bind(this)}/>
      </div>
    )
  }

  submitComment(comment) {
    this.setState({
      commentList: [...this.state.commentList, comment]
    })
  }

  removeItem(index) {
    const newCommentList = [...this.state.commentList];
    newCommentList.splice(index, 1);
    this.setState({
      commentList: newCommentList
    })
  }
}
```